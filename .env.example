# KBAI API Configuration (Combined with DARKBO)
# Copy this file to .env and modify the values as needed

# =============================================================================
# Server Configuration
# =============================================================================

# Server host (default: 0.0.0.0 - listens on all interfaces)
HOST=0.0.0.0

# Server port (default: 8000)
PORT=8000

# Enable auto-reload for development (default: false)
# Set to 'true' for development, 'false' for production
RELOAD=false

# =============================================================================
# Database Configuration
# =============================================================================

# Database backend type: 'sqlite' or 'postgresql' (default: sqlite)
DB_BACKEND=sqlite

# SQLite database file path (default: ./app/kbai_api.db)
# Only used when DB_BACKEND=sqlite
TRACE_DB_PATH=./app/kbai_api.db

# PostgreSQL database configuration
# Only used when DB_BACKEND=postgresql
DB_HOST=localhost
DB_PORT=5432
DB_NAME=kbai
DB_USER=kbai_user
DB_PASSWORD=kbai_password
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Vector database configuration for embeddings and attachments
# Options: 'local' (file-based), 'postgresql' (with pgvector)
VECTOR_STORAGE=local
VECTOR_DB_HOST=localhost
VECTOR_DB_PORT=5432
VECTOR_DB_NAME=kbai_vectors
VECTOR_DB_USER=kbai_vector_user
VECTOR_DB_PASSWORD=kbai_vector_password

# Attachment storage configuration
# Options: 'local' (file system), 's3' (Amazon S3), 'gcs' (Google Cloud Storage)
ATTACHMENT_STORAGE=local
ATTACHMENT_STORAGE_PATH=./data

# =============================================================================
# Authentication & Security
# =============================================================================

# JWT signing key - CHANGE THIS IN PRODUCTION!
# Generate a secure key: openssl rand -hex 32
AUTH_SIGNING_KEY=dev-signing-key-change-me

# JWT algorithm (default: HS256)
AUTH_JWT_ALG=HS256

# Default token TTL in seconds (default: 3600 = 1 hour)
AUTH_DEFAULT_TTL_SECONDS=3600

# API token for legacy compatibility (optional)
KBAI_API_TOKEN=your-optional-api-token-here

# =============================================================================
# Request & Security Limits
# =============================================================================

# Maximum request body size in bytes (default: 65536 = 64KB)
MAX_REQUEST_BYTES=65536

# CORS allowed origins (comma-separated, use * for all)
# Examples:
#   ALLOWED_ORIGINS=*
#   ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
ALLOWED_ORIGINS=*

# =============================================================================
# Monitoring & Observability
# =============================================================================

# Enable detailed request tracing (default: true)
ENABLE_TRACING=true

# Enable Prometheus metrics (default: true)
ENABLE_METRICS=true

# =============================================================================
# Application Features
# =============================================================================

# Default admin username (for simple auth)
DEFAULT_ADMIN_USERNAME=admin

# Default admin password - CHANGE THIS IN PRODUCTION!
DEFAULT_ADMIN_PASSWORD=admin

# =============================================================================
# Data Storage
# =============================================================================

# Base directory for user data (default: ~/.kbai)
# DATA_DIR=~/.kbai

# Project mapping file (default: ~/proj_mapping.txt)
# PROJ_MAP_FILE=~/proj_mapping.txt

# =============================================================================
# DARKBO AI Configuration
# =============================================================================

# OpenAI API Configuration (from DARKBO)
# OpenAI API key for AI features - CHANGE THIS!
OPENAI_API_KEY=your_openai_api_key_here

# Optional: Specify OpenAI model (default: gpt-4o-mini for cost efficiency)
# Other options: gpt-4, gpt-4-turbo, gpt-3.5-turbo
OPENAI_MODEL=gpt-4o-mini

# =============================================================================
# Development & Debugging
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Enable debug mode (default: false)
DEBUG=false

# =============================================================================
# External Integrations
# =============================================================================

# Embedding service URL (when implemented)
# EMBEDDING_SERVICE_URL=http://localhost:9000

# Vector database connection (when implemented)
# VECTOR_DB_URL=postgresql://user:pass@localhost/vectordb

# =============================================================================
# Production Deployment
# =============================================================================

# Number of worker processes for production (uvicorn/gunicorn)
# WORKERS=4

# SSL certificate file path (for HTTPS)
# SSL_CERT_FILE=/path/to/cert.pem

# SSL private key file path (for HTTPS)
# SSL_KEY_FILE=/path/to/key.pem

# =============================================================================
# Backup & Maintenance
# =============================================================================

# Database backup directory
# BACKUP_DIR=./backups

# Automatic backup interval in hours (0 = disabled)
# BACKUP_INTERVAL_HOURS=24

# Maximum number of backup files to keep
# MAX_BACKUP_FILES=7